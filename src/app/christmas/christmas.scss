@import url('https://fonts.googleapis.com/css2?family=Fraunces:wght@400;600;800;900&family=Mountains+of+Christmas:wght@400;700&display=swap');

.page {
  --bg-base: linear-gradient(180deg, #0b1b3a 0%, #061027 60%, #040a18 100%);
  --bg-spot-1: radial-gradient(900px 500px at 20% 0%, rgba(255,255,255,.12), transparent 60%);
  --bg-spot-2: radial-gradient(900px 500px at 80% 20%, rgba(255,0,0,.12), transparent 60%);
  --panel-bg: rgba(255,255,255,.08);
  --panel-border: rgba(255,255,255,.14);
  --panel-shadow: 0 10px 40px rgba(0,0,0,.35);
  --text: #f7f3ee;
  --muted: rgba(255,255,255,.75);
  --accent: #ffe08a;
  --accent-2: #ff3b3b;
  --glow: rgba(255,224,138,.6);
  --topbar-bg: rgba(0,0,0,.18);
  --input-bg: rgba(0,0,0,.22);
  --model-bg: rgba(0,0,0,.18);
  --stripe: rgba(255,255,255,.06);
  --badge-bg: rgba(255,255,255,.12);
  --badge-border: rgba(255,255,255,.16);
  --santa-bg: rgba(255,0,0,.08);
  --santa-border: rgba(255,255,255,.12);
  --santa-shadow: 0 0 28px rgba(255, 224, 138, .18);
  --toggle-bg: rgba(0,0,0,.18);
  --toggle-border: rgba(255,255,255,.2);
  --switch-text: #1b1b1b;
  --snow-page: .42;
  --snow-left: .75;

  min-height: 100vh;
  color: var(--text);
  background: var(--bg-spot-1), var(--bg-spot-2), var(--bg-base);
  overflow-x: hidden;
  font-family: 'Fraunces', 'Georgia', serif;
  transition: background 400ms ease, color 300ms ease;
  position: relative;
}

.page::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle, rgba(255,255,255,.12) 1px, transparent 2px) 0 0 / 90px 90px,
    radial-gradient(circle, rgba(255,255,255,.08) 1px, transparent 2px) 20px 30px / 120px 120px;
  opacity: .35;
  mix-blend-mode: screen;
}

.page::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.9) 2px, transparent 3px),
    radial-gradient(circle, rgba(255,255,255,.7) 1.4px, transparent 2.4px),
    radial-gradient(circle, rgba(255,255,255,.6) 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.45) .8px, transparent 1.6px);
  background-size: 120px 120px, 90px 90px, 65px 65px, 45px 45px;
  background-position: 0 0, 30px 20px, 10px 40px, 20px 10px;
  opacity: var(--snow-page);
  animation: snow 12s linear infinite;
  filter: drop-shadow(0 0 10px rgba(255,255,255,.25));
}

.page.mode-day {
  --bg-base: linear-gradient(180deg, #cfe7ff 0%, #e8f4ff 45%, #fff6ea 100%);
  --bg-spot-1: radial-gradient(900px 500px at 10% 0%, rgba(255,255,255,.7), transparent 60%);
  --bg-spot-2: radial-gradient(900px 500px at 90% 10%, rgba(255,120,120,.35), transparent 60%);
  --panel-bg: rgba(255,255,255,.7);
  --panel-border: rgba(120,140,170,.35);
  --panel-shadow: 0 16px 40px rgba(110,130,170,.25);
  --text: #1c2a3a;
  --muted: rgba(20,35,60,.65);
  --accent: #d63c3c;
  --accent-2: #1f8f5a;
  --glow: rgba(214,60,60,.35);
  --topbar-bg: rgba(255,255,255,.7);
  --input-bg: rgba(255,255,255,.85);
  --model-bg: rgba(255,255,255,.7);
  --stripe: rgba(214,60,60,.08);
  --badge-bg: rgba(255,255,255,.7);
  --badge-border: rgba(120,140,170,.45);
  --santa-bg: rgba(214,60,60,.12);
  --santa-border: rgba(120,140,170,.35);
  --santa-shadow: 0 14px 28px rgba(214, 60, 60, .18);
  --toggle-bg: rgba(255,255,255,.6);
  --toggle-border: rgba(120,140,170,.35);
  --switch-text: #1b1b1b;
  --snow-page: .52;
  --snow-left: .82;
}

.page.mode-day::before {
  opacity: .22;
  mix-blend-mode: normal;
}

.page.mode-day .left .snow {
  opacity: var(--snow-left);
  filter: drop-shadow(0 0 14px rgba(255,255,255,.55));
}

.page.mode-day .gift3d {
  filter: drop-shadow(0 8px 10px rgba(60,80,120,.35));
}

.page.mode-day .right .santaWrap .santaBig {
  filter: drop-shadow(0 0 18px rgba(214, 60, 60, .25));
}

.page.mode-night {
  --bg-base: linear-gradient(180deg, #0b1b3a 0%, #061027 60%, #040a18 100%);
  --bg-spot-1: radial-gradient(900px 500px at 20% 0%, rgba(255,255,255,.12), transparent 60%);
  --bg-spot-2: radial-gradient(900px 500px at 80% 20%, rgba(255,0,0,.12), transparent 60%);
}

model-viewer {
  background: transparent;
  --poster-color: transparent;
}

.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 18px;
  position: sticky;
  top: 0;
  backdrop-filter: blur(10px);
  background: var(--topbar-bg);
  border-bottom: 1px solid var(--panel-border);

  .brand {
    font-weight: 700;
    letter-spacing: .4px;
    font-family: 'Mountains of Christmas', 'Fraunces', serif;
  }

  .top-actions {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .themeSwitch {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 14px;
    border-radius: 999px;
    border: 1px solid var(--toggle-border);
    background: var(--toggle-bg);
    cursor: pointer;
    font-size: 12px;
    font-weight: 800;
    color: var(--text);
    transition: transform 160ms ease, box-shadow 200ms ease, background 200ms ease;
  }

  .themeSwitch:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 18px rgba(0,0,0,.15);
  }

  .themeIcon {
    width: 26px;
    height: 26px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: linear-gradient(120deg, var(--accent), #fff);
    color: var(--switch-text);
    font-size: 14px;
  }

  .ghost {
    background: transparent;
    border: 1px solid var(--panel-border);
    color: var(--text);
    padding: 10px 12px;
    border-radius: 14px;
    cursor: pointer;
  }
}

.pageLoader {
  position: fixed;
  inset: 0;
  z-index: 40;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 14px;
  background: rgba(6, 12, 26, .45);
  backdrop-filter: blur(8px);
}

.spinner {
  position: relative;
  width: 110px;
  height: 110px;
  display: grid;
  place-items: center;
}

.spinRing {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  border: 4px solid rgba(255,255,255,.15);
  border-top-color: var(--accent);
  border-right-color: var(--accent-2);
  animation: spin 1.1s linear infinite;
}

.santaHead {
  position: relative;
  width: 64px;
  height: 64px;
  animation: bob 1.2s ease-in-out infinite;
}

.santaHat {
  position: absolute;
  top: -8px;
  left: 6px;
  width: 52px;
  height: 36px;
  background: #e12d2d;
  border-radius: 10px 10px 14px 14px;
  transform: rotate(-12deg);
}

.santaHat::after {
  content: "";
  position: absolute;
  top: -6px;
  right: -6px;
  width: 18px;
  height: 18px;
  background: #fff;
  border-radius: 50%;
}

.santaFace {
  position: absolute;
  bottom: 0;
  left: 4px;
  width: 56px;
  height: 52px;
  background: #f4d7c1;
  border-radius: 16px 16px 22px 22px;
  box-shadow: inset 0 -6px 0 rgba(255,255,255,.35);
}

.santaFace .eye {
  position: absolute;
  top: 16px;
  width: 6px;
  height: 6px;
  background: #2b2b2b;
  border-radius: 50%;
}

.santaFace .e1 { left: 16px; }
.santaFace .e2 { right: 16px; }

.santaFace .nose {
  position: absolute;
  top: 24px;
  left: 24px;
  width: 8px;
  height: 8px;
  background: #e28f7b;
  border-radius: 50%;
}

.santaFace .beard {
  position: absolute;
  bottom: -8px;
  left: 6px;
  width: 44px;
  height: 30px;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 6px 14px rgba(255,255,255,.35);
}

.loadingText {
  font-weight: 700;
  color: var(--text);
  letter-spacing: .4px;
}

.grid {
  display: grid;
  grid-template-columns: 260px minmax(280px, 1fr) minmax(320px, 520px);
  gap: 16px;
  padding: 16px 18px 22px;
}

.card {
  border-radius: 18px;
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  box-shadow: var(--panel-shadow);
}

/* LEFT */
.left {
  position: relative;
  overflow: hidden;

  .parade {
    padding: 14px;
    display: flex;
    flex-direction: column;
    gap: 18px;

    .lane {
      display: flex;
      gap: 14px;
      white-space: nowrap;
      font-size: 28px;
      animation: slide 10s linear infinite;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.35));

      &.lane2 { animation-duration: 14s; opacity: .85; }
    }
  }

  .snow {
    position: absolute;
    inset: -60px;
    background-image:
      radial-gradient(circle, rgba(255,255,255,.9) 2px, transparent 3px),
      radial-gradient(circle, rgba(255,255,255,.6) 1px, transparent 2px),
      radial-gradient(circle, rgba(255,255,255,.7) 1.5px, transparent 2.5px);
    background-size: 120px 120px, 80px 80px, 160px 160px;
    opacity: .22;
    animation: snow 10s linear infinite;
    pointer-events: none;
  }
}

.giftRunway { position: absolute; inset: 0; pointer-events: none; }

.gift3d {
  position: absolute;
  bottom: 18px;
  left: -140px;
  width: 110px;
  height: 110px;
  filter: drop-shadow(0 10px 14px rgba(0,0,0,.45));
  animation: gift-slide 10s linear infinite;
  will-change: transform;
  border-radius: 14px;
}

.gift3d.g2 {
  bottom: 110px;
  width: 85px;
  height: 85px;
  opacity: .9;
  animation-duration: 13s;
  animation-delay: -3s;
}

.gift3d.g3 {
  bottom: 190px;
  width: 70px;
  height: 70px;
  opacity: .8;
  animation-duration: 16s;
  animation-delay: -7s;
}

/* CENTER */
.center {
  padding: 20px;

  h1 {
    margin: 4px 0 14px;
    font-size: clamp(28px, 3vw, 44px);
    font-family: 'Mountains of Christmas', 'Fraunces', serif;
    text-shadow: 0 6px 18px rgba(0,0,0,.25);
  }

  .form { display: flex; flex-direction: column; gap: 10px; }

  .error {
    color: #ff5a5a;
    font-size: 12px;
    font-weight: 700;
  }

  input {
    padding: 12px 14px;
    border-radius: 14px;
    border: 1px solid var(--panel-border);
    background: var(--input-bg);
    color: var(--text);

    &:focus { border-color: var(--accent); outline: none; }
  }

  .cta {
    margin-top: 8px;
    padding: 12px 14px;
    border-radius: 14px;
    border: none;
    cursor: pointer;
    font-weight: 800;
    color: #111;
    background: linear-gradient(110deg, var(--accent), #ffffff);

    &:hover { box-shadow: 0 0 20px var(--glow); }
  }

  .badge {
    display: inline-block;
    padding: 6px 10px;
    border-radius: 999px;
    background: var(--badge-bg);
    border: 1px solid var(--badge-border);
    font-size: 12px;
    margin-bottom: 10px;
  }

  .who { color: var(--accent); text-shadow: 0 0 18px var(--glow); }

}

/* RIGHT */
.right {
  padding: 16px;

  .panel {
    margin: 0 0 12px;
    font-size: 14px;
    color: var(--muted);
    letter-spacing: .4px;
    text-transform: uppercase;
  }

  .trees {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  .model {
    width: 100%;
    height: 240px;
    border-radius: 16px;
    background: var(--model-bg);
    border: 1px solid var(--panel-border);
  }

  .santaWrap {
    margin-top: 12px;
    padding: 12px;
    border-radius: 16px;
    background: var(--santa-bg);
    border: 1px solid var(--santa-border);
    position: relative;
    overflow: hidden;
    min-height: 360px;

    animation: santa-arrive .7s cubic-bezier(.2,.9,.25,1) both;
    box-shadow: var(--santa-shadow);

    .sparkle {
      position: absolute;
      top: 10px;
      right: 10px;
      animation: twinkle 1.2s ease-in-out infinite;
      z-index: 3;
    }

    .snowSanta {
      position: absolute;
      inset: -60px;
      pointer-events: none;
      opacity: 0;
      transform: translateY(-10px);
      z-index: 2;

      background-image:
        radial-gradient(circle, rgba(255,255,255,.95) 2px, transparent 3px),
        radial-gradient(circle, rgba(255,255,255,.70) 1.3px, transparent 2.2px),
        radial-gradient(circle, rgba(255,255,255,.55) 1px, transparent 2px),
        radial-gradient(circle, rgba(255,255,255,.35) .8px, transparent 1.8px);

      background-size: 90px 90px, 55px 55px, 38px 38px, 24px 24px;
      background-position: 0 0, 10px 30px, 22px 12px, 5px 18px;

      animation: snow 5s linear infinite;
      filter: drop-shadow(0 0 10px rgba(255,255,255,.18));
    }

    .santaBig {
      width: 100%;
      height: 320px;
      border-radius: 16px;
      background: var(--model-bg);
      border: 1px solid var(--panel-border);
      filter: drop-shadow(0 0 24px rgba(255, 224, 138, .35));
      position: relative;
      z-index: 1;
    }

    .santaText {
      margin-top: 10px;
      font-weight: 800;
      color: var(--accent);
      text-align: center;
      text-shadow: 0 0 18px rgba(255,224,138,.55);
      animation: twinkle 1.2s ease-in-out infinite;
      position: relative;
      z-index: 3;
    }

    /* âš¡ Flash */
    &.flash-on::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 50% 35%, rgba(255, 240, 210, .95), transparent 60%);
      opacity: 0;
      animation: flash 300ms ease-out both;
      pointer-events: none;
      z-index: 4;
    }
  }
}

/* Footer */
.footer {
  text-align: center;
  padding: 14px 18px 22px;
  color: var(--muted);
  font-size: 12px;
}

/* ðŸŽ¬ Snow boost 2s after submit */
.page.snow-boost {
  .left .snow {
    opacity: var(--snow-left);
    animation-duration: 4.5s;
    background-size: 75px 75px, 50px 50px, 105px 105px;
    filter: drop-shadow(0 0 14px rgba(255,255,255,.28));
  }

  .right .santaWrap .snowSanta {
    opacity: .85;
    transform: translateY(0);
    transition: opacity .25s ease, transform .25s ease;
  }
}

/* ðŸŽ… Fun Santa mode (stays) */
.page.snow-fun {
  .left .snow {
    opacity: .60;
    animation-duration: 5.5s;
    background-size: 85px 85px, 55px 55px, 115px 115px;
  }

  .right .santaWrap .snowSanta {
    opacity: .78;
    transform: translateY(0);
  }
}

/* Animations */
@keyframes slide { from { transform: translateX(-140%); } to { transform: translateX(140%); } }
@keyframes snow { from { transform: translateY(0); } to { transform: translateY(120px); } }
@keyframes gift-slide { from { transform: translateX(0); } to { transform: translateX(140vw); } }

@keyframes santa-arrive {
  0% { opacity: 0; transform: translateY(18px) scale(.92); filter: blur(2px); }
  60% { opacity: 1; transform: translateY(-2px) scale(1.02); filter: blur(0); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes twinkle {
  0%,100% { transform: scale(1); opacity: .7; }
  50% { transform: scale(1.12); opacity: 1; }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes bob {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

@keyframes flash {
  0% { opacity: 0; transform: scale(.98); }
  30% { opacity: .95; transform: scale(1.02); }
  100% { opacity: 0; transform: scale(1.05); }
}

/* Responsive */
@media (max-width: 1020px) {
  .grid { grid-template-columns: 1fr; }
  .right .trees { grid-template-columns: 1fr 1fr; }
  .right .model { height: 260px; }
  .topbar {
    position: static;
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  .topbar .top-actions {
    width: 100%;
    justify-content: space-between;
  }
}

@media (max-width: 560px) {
  .page {
    --snow-page: .6;
    --snow-left: .9;
  }

  .grid { padding: 10px 12px 16px; gap: 12px; }
  .right .trees { grid-template-columns: 1fr; }
  .gift3d { width: 72px; height: 72px; }
  .topbar .brand { font-size: 17px; }
  .topbar .themeSwitch {
    padding: 6px 10px;
    font-size: 10px;
  }
  .topbar .themeLabel { display: none; }
  .topbar .ghost { padding: 7px 10px; font-size: 12px; }
  .center h1 { font-size: clamp(22px, 7.2vw, 30px); }
  .center input { padding: 10px 12px; font-size: 14px; }
  .center .cta { padding: 11px 12px; font-size: 14px; }
  .center .message p { font-size: 14px; }
  .right .model { height: 210px; }
  .right .santaWrap { min-height: 280px; padding: 10px; }
  .right .santaWrap .santaBig { height: 240px; }
  .pageLoader .spinner { width: 86px; height: 86px; }
  .pageLoader .loadingText { font-size: 11px; }
}
